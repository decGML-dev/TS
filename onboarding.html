<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Onboarding Automation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #6c757d;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #ff9e00;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border: #e0e0e0;
            --sidebar-width: 240px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 1.5rem 1rem;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo-icon {
            background: var(--primary);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo h1 {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .step-list {
            list-style: none;
            flex-grow: 1;
        }

        .step-item {
            padding: 0.85rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: default;
            transition: all 0.2s;
            opacity: 0.7;
        }

        .step-item.active {
            background-color: rgba(67, 97, 238, 0.2);
            opacity: 1;
            border-left: 3px solid var(--primary);
        }

        .step-item.completed {
            opacity: 1;
            color: #a0aec0;
        }

        .step-item.completed .step-icon {
            background-color: #38a169;
        }

        .step-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #4a5568;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .step-text {
            font-size: 0.9rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .status-badge {
            background: var(--primary);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Card Container */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            margin-bottom: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-header h2 {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .step-indicator {
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: #f1f5f9;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 6px;
            background-color: #e2e8f0;
            border-radius: 3px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #4cc9f0);
            border-radius: 3px;
            width: 12.5%;
            transition: width 0.5s ease;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.25rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .input-with-icon {
            position: relative;
        }

        .input-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem 0.75rem 0.75rem 2.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        textarea {
            padding-left: 0.75rem;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .checkbox-group:hover {
            background-color: #f8f9fa;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-weight: 500;
            cursor: pointer;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 2rem;
        }

        button {
            padding: 0.85rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-success:hover {
            background-color: #3ab5d9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(76, 201, 240, 0.3);
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #e11575;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(247, 37, 133, 0.3);
        }

        /* System Logs Console */
        .system-log-container {
            margin-top: 2.5rem;
        }

        .system-log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .system-log-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .system-log {
            background: #1a202c;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 0.85rem;
            height: 200px;
            overflow-y: auto;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .log-entry {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #2d3748;
            display: flex;
            align-items: flex-start;
        }

        .log-time {
            color: #a0aec0;
            margin-right: 12px;
            min-width: 70px;
        }

        .log-message {
            flex: 1;
        }

        .log-success { color: #68d391; }
        .log-warning { color: #fbbf24; }
        .log-error { color: #fc8181; }
        .log-info { color: #63b3ed; }

        /* Task Lists */
        .task-list {
            margin: 1.5rem 0;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            background-color: #f8f9fa;
        }

        .task-item.completed {
            background-color: #f0fff4;
            color: #2f855a;
        }

        .task-check {
            margin-right: 12px;
            color: var(--success);
        }

        /* Completion Screen */
        .completion-screen {
            text-align: center;
            padding: 3rem 1rem;
        }

        .completion-icon {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 1.5rem;
        }

        .completion-screen h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 1rem;
            }
            
            .step-list {
                display: flex;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }
            
            .step-item {
                flex-direction: column;
                text-align: center;
                min-width: 100px;
                padding: 0.75rem 0.5rem;
            }
            
            .step-text {
                font-size: 0.8rem;
                margin-top: 5px;
            }
            
            .main-content {
                padding: 1.5rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.4s ease-in;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-users"></i>
            </div>
            <h1>OnboardPro</h1>
        </div>
        
        <ul class="step-list">
            <li class="step-item active" data-step="1">
                <div class="step-icon">1</div>
                <div class="step-text">Candidate Details</div>
            </li>
            <li class="step-item" data-step="2">
                <div class="step-icon">2</div>
                <div class="step-text">Create Contract</div>
            </li>
            <li class="step-item" data-step="3">
                <div class="step-icon">3</div>
                <div class="step-text">Candidate Decision</div>
            </li>
            <li class="step-item" data-step="4">
                <div class="step-icon">4</div>
                <div class="step-text">Personal Data</div>
            </li>
            <li class="step-item" data-step="5">
                <div class="step-icon">5</div>
                <div class="step-text">References</div>
            </li>
            <li class="step-item" data-step="6">
                <div class="step-icon">6</div>
                <div class="step-text">HR Review</div>
            </li>
            <li class="step-item" data-step="7">
                <div class="step-icon">7</div>
                <div class="step-text">Provisioning</div>
            </li>
            <li class="step-item" data-step="8">
                <div class="step-icon">8</div>
                <div class="step-text">Complete</div>
            </li>
        </ul>
        
        <div style="margin-top: auto; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.8rem; color: #a0aec0;">
            <div><i class="fas fa-shield-alt"></i> Secure Portal</div>
            <div style="margin-top: 5px;"><i class="fas fa-clock"></i> Updated just now</div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="header">
            <h1>Employee Onboarding Automation</h1>
            <div class="status-badge" id="status-badge">Step 1 of 8</div>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <!-- Step Views -->
        <div id="view-1" class="card fade-in">
            <div class="card-header">
                <h2><i class="fas fa-user-plus"></i> Input Candidate Details</h2>
                <div class="step-indicator">Step 1</div>
            </div>
            
            <div class="form-group">
                <label for="c-name">Full Name</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-user"></i>
                    <input type="text" id="c-name" placeholder="John Doe">
                </div>
            </div>
            <div class="form-group">
                <label for="c-address">Address</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-home"></i>
                    <input type="text" id="c-address" placeholder="123 Main St, City, State">
                </div>
            </div>
            <div class="form-group">
                <label for="c-email">Email</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-envelope"></i>
                    <input type="email" id="c-email" placeholder="john.doe@example.com">
                </div>
            </div>
            <div class="form-group">
                <label for="c-phone">Phone Number</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-phone"></i>
                    <input type="tel" id="c-phone" placeholder="+1 (555) 123-4567">
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn-primary" onclick="app.saveCandidateDetails()">
                    <i class="fas fa-file-contract"></i> Create Contract Profile
                </button>
            </div>
        </div>

        <div id="view-2" class="card hidden fade-in">
            <div class="card-header">
                <h2><i class="fas fa-file-signature"></i> Create Contract & Handbook</h2>
                <div class="step-indicator">Step 2</div>
            </div>
            
            <p>Select components to generate the DocuSign envelope.</p>
            
            <div class="task-list">
                <div class="checkbox-group">
                    <input type="checkbox" id="opt-mandatory" checked disabled>
                    <label for="opt-mandatory">Mandatory Components (Standard Terms)</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="opt-bonus">
                    <label for="opt-bonus">Option: Sign-on Bonus</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="opt-remote">
                    <label for="opt-remote">Option: Remote Work Rider</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="opt-stock">
                    <label for="opt-stock">Option: Stock Options</label>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn-primary" onclick="app.generateAndSendContract()">
                    <i class="fas fa-paper-plane"></i> Generate & Email Candidate
                </button>
            </div>
        </div>

        <div id="view-3" class="card hidden fade-in">
            <div class="card-header">
                <h2><i class="fas fa-envelope-open-text"></i> Candidate Decision Portal</h2>
                <div class="step-indicator">Step 3</div>
            </div>
            
            <p>The candidate has received the email containing the Contract and Handbook.</p>
            
            <div style="background: #f1f5f9; padding: 15px; border-left: 4px solid var(--primary); margin: 15px 0; border-radius: 0 8px 8px 0;">
                <strong>Email Subject:</strong> Your Offer from OnboardPro<br>
                <strong>To:</strong> <span id="candidate-email-display"></span><br>
                <strong>Attachments:</strong> Contract.pdf, Handbook.pdf, Welcome_Guide.pdf
            </div>
            
            <p><em>(Simulating candidate action...)</em></p>
            
            <div class="btn-group">
                <button class="btn-success" onclick="app.handleCandidateDecision(true)">
                    <i class="fas fa-check-circle"></i> Accept Offer
                </button>
                <button class="btn-danger" onclick="app.handleCandidateDecision(false)">
                    <i class="fas fa-times-circle"></i> Decline Offer
                </button>
            </div>
        </div>

        <div id="view-4" class="card hidden fade-in">
            <div class="card-header">
                <h2><i class="fas fa-id-card"></i> Candidate Portal: Personal Data</h2>
                <div class="step-indicator">Step 4</div>
            </div>
            
            <p>Please provide the required documentation and details.</p>
            
            <div class="form-group">
                <label>Photo ID / DOB Upload (Simulated)</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-file-upload"></i>
                    <input type="text" value="passport.jpg" disabled style="background: #e2e8f0; cursor: not-allowed;">
                </div>
            </div>
            <div class="form-group">
                <label for="p-ppsn">PPSN / Social Security Number</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-id-card"></i>
                    <input type="text" id="p-ppsn" placeholder="123-45-6789">
                </div>
            </div>
            <div class="form-group">
                <label for="p-bank">Bank Details (IBAN)</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-university"></i>
                    <input type="text" id="p-bank" placeholder="IE29 AIBK 9311 5212 3456 78">
                </div>
            </div>
            <div class="form-group">
                <label for="p-emergency">Emergency Contact Name</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-user-friends"></i>
                    <input type="text" id="p-emergency" placeholder="Jane Smith">
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn-primary" onclick="app.submitPortalData()">
                    <i class="fas fa-arrow-right"></i> Next: References
                </button>
            </div>
        </div>

        <div id="view-5" class="card hidden fade-in">
            <div class="card-header">
                <h2><i class="fas fa-user-check"></i> Candidate Portal: References</h2>
                <div class="step-indicator">Step 5</div>
            </div>
            
            <div class="form-group">
                <label for="r-name">Reference Name</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-user-tie"></i>
                    <input type="text" id="r-name" placeholder="Jane Smith">
                </div>
            </div>
            <div class="form-group">
                <label for="r-pos">Reference Position & Company</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-briefcase"></i>
                    <input type="text" id="r-pos" placeholder="Senior Manager, Tech Corp Inc.">
                </div>
            </div>
            <div class="form-group">
                <label for="r-email">Reference Email</label>
                <div class="input-with-icon">
                    <i class="input-icon fas fa-envelope"></i>
                    <input type="email" id="r-email" placeholder="jane.smith@techcorp.com">
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn-primary" onclick="app.submitReferences()">
                    <i class="fas fa-paper-plane"></i> Submit & Send Verification Emails
                </button>
            </div>
        </div>

        <div id="view-6" class="card hidden fade-in">
            <div class="card-header">
                <h2><i class="fas fa-clipboard-check"></i> HR Document Review</h2>
                <div class="step-indicator">Step 6</div>
            </div>
            
            <p>Review the data submitted by the candidate and reference checks.</p>
            
            <div style="background: #fffbeb; padding: 15px; border: 1px solid #fcd34d; border-radius: 8px; margin-bottom: 20px;">
                <strong>Status:</strong> Documents Pending Review<br>
                <strong>Reference Check:</strong> Verified (Simulated)<br>
                <strong>Identity Verification:</strong> Pending
            </div>

            <div class="form-group">
                <label for="hr-notes">Review Notes / Clarification Request</label>
                <textarea id="hr-notes" rows="3" placeholder="Enter notes if rejecting..."></textarea>
            </div>

            <div class="btn-group">
                <button class="btn-success" onclick="app.hrReviewAction(true)">
                    <i class="fas fa-check"></i> Approve Onboarding
                </button>
                <button class="btn-danger" onclick="app.hrReviewAction(false)">
                    <i class="fas fa-exclamation-circle"></i> Request Clarification
                </button>
            </div>
        </div>

        <div id="view-7" class="card hidden fade-in">
            <div class="card-header">
                <h2><i class="fas fa-tasks"></i> Final Provisioning</h2>
                <div class="step-indicator">Step 7</div>
            </div>
            
            <p>The candidate is approved. Executing final tasks.</p>
            
            <h3 style="margin-top: 1.5rem; color: var(--text-primary);">HR Tasks</h3>
            <div class="task-list">
                <div class="task-item">
                    <i class="task-check fas fa-check-circle"></i>
                    <div>Create Employee Record</div>
                </div>
                <div class="task-item">
                    <i class="task-check fas fa-check-circle"></i>
                    <div>Send Welcome Email</div>
                </div>
                <div class="task-item">
                    <i class="task-check fas fa-check-circle"></i>
                    <div>Add to Payroll System</div>
                </div>
            </div>

            <h3 style="margin-top: 1.5rem; color: var(--text-primary);">IT Tasks</h3>
            <div class="task-list">
                <div class="task-item">
                    <i class="task-check fas fa-check-circle"></i>
                    <div>System Access Details Generated</div>
                </div>
                <div class="task-item">
                    <i class="task-check fas fa-check-circle"></i>
                    <div>Email Account Created</div>
                </div>
                <div class="task-item">
                    <i class="task-check fas fa-check-circle"></i>
                    <div>IT Equipment Ordered</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn-primary" onclick="app.finalizeProcess()">
                    <i class="fas fa-flag-checkered"></i> Complete Onboarding
                </button>
            </div>
        </div>

        <div id="view-8" class="card hidden fade-in">
            <div class="completion-screen">
                <div class="completion-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 style="color: var(--success);">Onboarding Complete!</h2>
                <p style="font-size: 1.1rem; margin-bottom: 2rem;">The employee has been successfully onboarded.</p>
                
                <div style="background: #f0fff4; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem; text-align: left;">
                    <h3 style="color: #2f855a; margin-bottom: 1rem;">Next Steps</h3>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="margin-bottom: 0.5rem;"><i class="fas fa-calendar-check" style="color: #38a169; margin-right: 10px;"></i> First day orientation scheduled</li>
                        <li style="margin-bottom: 0.5rem;"><i class="fas fa-laptop" style="color: #38a169; margin-right: 10px;"></i> Equipment will arrive in 3-5 business days</li>
                        <li><i class="fas fa-user-shield" style="color: #38a169; margin-right: 10px;"></i> Security access granted</li>
                    </ul>
                </div>
                
                <div class="btn-group">
                    <button class="btn-primary" onclick="location.reload()">
                        <i class="fas fa-user-plus"></i> Start New Candidate
                    </button>
                </div>
            </div>
        </div>

        <!-- System Logs Console -->
        <div class="system-log-container">
            <div class="system-log-header">
                <h3><i class="fas fa-terminal"></i> System Log</h3>
                <div style="font-size: 0.85rem; color: var(--text-secondary);">Real-time updates</div>
            </div>
            <div class="system-log" id="sys-log">
                <div class="log-entry">
                    <span class="log-time">10:00:00</span>
                    <span class="log-message log-info">System initialized. Ready to start onboarding process.</span>
                </div>
            </div>
        </div>
    </main>

    <script>
        const app = {
            currentStep: 1,
            totalSteps: 8,
            data: {
                candidate: {},
                contractOptions: [],
                portalData: {},
                referenceData: {}
            },

            // Initialize the app
            init: () => {
                app.updateProgressBar();
                app.updateSidebar();
                app.log('System initialized. Ready to start onboarding process.', 'info');
            },

            // Update progress bar and status
            updateProgressBar: () => {
                const progressPercent = ((app.currentStep - 1) / (app.totalSteps - 1)) * 100;
                document.getElementById('progress-bar').style.width = `${progressPercent}%`;
                document.getElementById('status-badge').innerText = `Step ${app.currentStep} of ${app.totalSteps}`;
            },

            // Update sidebar navigation
            updateSidebar: () => {
                document.querySelectorAll('.step-item').forEach((item, index) => {
                    const stepNum = index + 1;
                    
                    item.classList.remove('active', 'completed');
                    
                    if (stepNum === app.currentStep) {
                        item.classList.add('active');
                    } else if (stepNum < app.currentStep) {
                        item.classList.add('completed');
                    }
                });
            },

            // Navigation Helper
            goToView: (viewId, stepName, stepNumber) => {
                // Update current step
                app.currentStep = stepNumber;
                
                // Hide all views
                document.querySelectorAll('.card').forEach(el => el.classList.add('hidden'));
                
                // Show target view
                const targetView = document.getElementById(viewId);
                targetView.classList.remove('hidden');
                targetView.classList.add('fade-in');
                
                // Update progress and sidebar
                app.updateProgressBar();
                app.updateSidebar();
                
                // Update candidate email display if available
                if (app.data.candidate.email) {
                    document.getElementById('candidate-email-display').textContent = app.data.candidate.email;
                }
                
                app.log(`Navigated to: ${stepName}`, 'info');
            },

            // Logging Helper
            log: (message, type = 'info') => {
                const logContainer = document.getElementById('sys-log');
                const time = new Date().toLocaleTimeString();
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                
                let typeClass = 'log-info';
                let icon = 'ℹ️';
                
                switch(type) {
                    case 'success': typeClass = 'log-success'; icon = '✅'; break;
                    case 'warning': typeClass = 'log-warning'; icon = '⚠️'; break;
                    case 'error': typeClass = 'log-error'; icon = '❌'; break;
                    case 'info': typeClass = 'log-info'; icon = 'ℹ️'; break;
                }
                
                entry.innerHTML = `
                    <span class="log-time">${time}</span>
                    <span class="log-message ${typeClass}">${icon} ${message}</span>
                `;
                
                logContainer.prepend(entry);
                
                // Auto-scroll to top
                logContainer.scrollTop = 0;
            },

            // STEP 1: Candidate Details
            saveCandidateDetails: () => {
                const name = document.getElementById('c-name').value.trim();
                const email = document.getElementById('c-email').value.trim();
                
                if(!name || !email) { 
                    app.log('Please fill in Name and Email fields', 'warning');
                    alert("Please fill in Name and Email"); 
                    return; 
                }

                app.data.candidate = {
                    name: name,
                    address: document.getElementById('c-address').value.trim(),
                    email: email,
                    phone: document.getElementById('c-phone').value.trim()
                };
                
                app.log(`Candidate data captured: ${name} (${email})`, 'success');
                app.goToView('view-2', 'Create Contract', 2);
            },

            // STEP 2: Generate Contract
            generateAndSendContract: () => {
                // Collect options
                app.data.contractOptions = [];
                if(document.getElementById('opt-bonus').checked) app.data.contractOptions.push("Sign-on Bonus");
                if(document.getElementById('opt-remote').checked) app.data.contractOptions.push("Remote Rider");
                if(document.getElementById('opt-stock').checked) app.data.contractOptions.push("Stock Options");

                app.log(`Generating contract with: Mandatory Terms + ${app.data.contractOptions.join(', ')}`, 'info');
                app.log(`DocuSign: Envelope created and sent for signing`, 'success');
                app.log(`Email System: Contract & Handbook sent to ${app.data.candidate.email}`, 'success');
                
                app.goToView('view-3', 'Candidate Decision', 3);
            },

            // STEP 3: Accept / Decline Logic
            handleCandidateDecision: (accepted) => {
                if (accepted) {
                    app.log(`Candidate Action: Offer ACCEPTED`, 'success');
                    app.log(`DocuSign: Contract Auto-Confirmed. Signed NDA & Safety Docs saved`, 'success');
                    app.goToView('view-4', 'Candidate Portal (Data)', 4);
                } else {
                    app.log(`Candidate Action: Offer DECLINED`, 'warning');
                    app.log(`Workflow: Looping back for Fresh Offer/New Contract`, 'info');
                    
                    // Show confirmation before resetting
                    if (confirm("Offer Declined. Would you like to create a fresh offer with different terms?")) {
                        // Reset contract view options
                        document.getElementById('opt-bonus').checked = false;
                        document.getElementById('opt-remote').checked = false;
                        document.getElementById('opt-stock').checked = false;
                        
                        app.goToView('view-2', 'Create Contract (Fresh Offer)', 2);
                    }
                }
            },

            // STEP 4: Portal Data Entry
            submitPortalData: () => {
                const ppsn = document.getElementById('p-ppsn').value.trim();
                if(!ppsn) { 
                    app.log('Please enter PPSN/Social Security Number', 'warning');
                    alert("Please enter PPSN"); 
                    return; 
                }

                app.data.portalData = {
                    ppsn: ppsn,
                    bank: document.getElementById('p-bank').value.trim(),
                    emergency: document.getElementById('p-emergency').value.trim()
                };

                app.log(`Portal: Personal ID, Bank, Emergency contact info uploaded`, 'success');
                app.goToView('view-5', 'Candidate Portal (References)', 5);
            },

            // STEP 5: References
            submitReferences: () => {
                const rName = document.getElementById('r-name').value.trim();
                if(!rName) { 
                    app.log('Please enter a Reference Name', 'warning');
                    alert("Please enter a Reference Name"); 
                    return; 
                }

                app.data.referenceData = {
                    name: rName,
                    email: document.getElementById('r-email').value.trim(),
                    position: document.getElementById('r-pos').value.trim()
                };

                app.log(`Portal: Reference details captured for ${rName}`, 'success');
                app.log(`Email System: Verification request sent to ${app.data.referenceData.email}`, 'info');
                
                // Simulating a delay for reference return
                setTimeout(() => {
                    app.log(`System: Reference Verification received (Simulated)`, 'success');
                }, 1500);

                app.goToView('view-6', 'HR Document Review', 6);
            },

            // STEP 6: HR Review Loop
            hrReviewAction: (approved) => {
                const notes = document.getElementById('hr-notes').value.trim();

                if (approved) {
                    app.log(`HR Decision: Documents APPROVED`, 'success');
                    app.goToView('view-7', 'HR & IT Provisioning', 7);
                } else {
                    if(!notes) { 
                        app.log('Please add clarification notes before rejecting', 'warning');
                        alert("Please add clarification notes before rejecting."); 
                        return; 
                    }
                    
                    app.log(`HR Decision: Not Fully Approved. Requesting clarification`, 'warning');
                    app.log(`Email System: Clarification email sent to candidate: "${notes}"`, 'info');
                    
                    alert(`Returned to candidate with note: ${notes}`);
                    // Loop back to Step 4 (Portal Data)
                    app.goToView('view-4', 'Candidate Portal (Correction)', 4);
                }
            },

            // STEP 7: Final Tasks
            finalizeProcess: () => {
                app.log(`HR Task: Employee Record Created`, 'success');
                app.log(`HR Task: Welcome Email Sent`, 'success');
                app.log(`IT Task: System Access / ID Badge generated`, 'success');
                app.log(`IT Task: Equipment ordered`, 'success');
                app.log(`Onboarding process completed successfully!`, 'success');
                
                // Animate task completion
                document.querySelectorAll('.task-check').forEach((icon, index) => {
                    setTimeout(() => {
                        icon.classList.add('pulse');
                        setTimeout(() => icon.classList.remove('pulse'), 500);
                    }, index * 300);
                });
                
                setTimeout(() => {
                    app.goToView('view-8', 'Complete', 8);
                }, 2000);
            }
        };

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', app.init);
    </script>
</body>
</html>
