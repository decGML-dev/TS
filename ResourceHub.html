<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resource Hub</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&family=Fraunces:ital,opsz,wght@0,9..144,400;0,9..144,600;1,9..144,400&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8fafc;
      --bg-secondary:#f1f5f9;
      --card:#ffffff;
      --panel:#fafbfc;
      --text:#0f172a;
      --text-secondary:#334155;
      --muted:#64748b;
      --line:#e2e8f0;
      --line-dark:#cbd5e1;
      --accent:#6366f1;
      --accent-dark:#4f46e5;
      --accent-light:#818cf8;
      --accent2:#8b5cf6;
      --warn:#f59e0b;
      --good:#10b981;
      --bad:#ef4444;
      --shadow: 0 4px 12px rgba(15,23,42,.08), 0 2px 6px rgba(15,23,42,.04);
      --shadow-lg: 0 8px 24px rgba(15,23,42,.12), 0 4px 10px rgba(15,23,42,.06);
      --radius:18px;
      --radius2:14px;
      --font: 'Plus Jakarta Sans', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:
        radial-gradient(ellipse 1200px 800px at 20% -10%, rgba(99,102,241,.08), transparent 60%),
        radial-gradient(ellipse 1000px 600px at 85% 15%, rgba(139,92,246,.06), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg-secondary));
      line-height: 1.6;
    }
    a{color:var(--accent); text-decoration:none; transition: color .2s;}
    a:hover{color:var(--accent-dark); text-decoration:underline}
    
    .wrap{max-width:1200px; margin:0 auto; padding:28px 24px}
    
    header{
      display:flex; 
      justify-content:space-between; 
      align-items:flex-start; 
      gap:20px;
      padding:24px; 
      border:2px solid var(--line);
      background: var(--card);
      border-radius:var(--radius); 
      box-shadow:var(--shadow);
      margin-bottom: 24px;
    }
    header h1{
      margin:0 0 8px; 
      font-family: 'Fraunces', serif;
      font-size:28px;
      font-weight: 600;
      letter-spacing:-.4px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    header p{
      margin:0; 
      color:var(--text-secondary); 
      font-size:14px; 
      line-height:1.7;
      font-weight: 400;
    }
    
    .toolbar{
      display:flex; 
      gap:12px; 
      flex-wrap:wrap; 
      justify-content:flex-end; 
      align-items:center;
    }
    .search{
      display:flex; 
      gap:12px; 
      align-items:center; 
      flex-wrap:wrap;
    }
    
    input[type="search"]{
      width:min(440px, 78vw);
      padding:12px 16px;
      border-radius:14px;
      border:2px solid var(--line);
      background: var(--card);
      color:var(--text);
      font-family: inherit;
      font-size: 14px;
      font-weight: 400;
      outline:none;
      transition: all .25s ease;
    }
    input[type="search"]::placeholder{
      color: var(--muted);
    }
    input[type="search"]:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 4px rgba(99,102,241,.15);
    }
    input[type="search"]:hover:not(:focus){
      border-color:var(--line-dark);
    }
    
    button{
      cursor:pointer; 
      user-select:none;
      border:2px solid var(--line);
      background: var(--bg);
      color:var(--text);
      padding:12px 20px;
      border-radius:14px;
      font-weight:700;
      font-size:14px;
      font-family: inherit;
      transition:all .2s ease;
    }
    button:hover{
      background:var(--bg-secondary); 
      border-color:var(--line-dark);
      box-shadow: 0 2px 8px rgba(15,23,42,.06);
    }
    button:active{transform:scale(0.98)}
    
    button.primary{
      background:linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      border-color:var(--accent);
      color: white;
      box-shadow: 0 4px 14px rgba(99,102,241,.25);
    }
    button.primary:hover{
      box-shadow: 0 6px 20px rgba(99,102,241,.35);
      transform: translateY(-2px);
    }
    button.primary:active{
      transform: translateY(0);
    }

    .grid{
      display:grid; 
      grid-template-columns: 360px 1fr; 
      gap:24px; 
      margin-top:0; 
      align-items:start;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: 1fr} }

    .card{
      border:2px solid var(--line);
      background: var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .card h2{
      margin:0;
      padding:18px 20px;
      border-bottom:2px solid var(--line);
      font-size:16px;
      font-weight: 700;
      letter-spacing:.2px;
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
      gap:16px;
      background: var(--panel);
    }
    .pill{
      font-size:12px; 
      color:var(--text-secondary);
      font-weight: 600;
      border:2px solid var(--line);
      border-radius:999px;
      padding:6px 12px;
      background: var(--card);
      white-space:nowrap;
    }
    .body{padding:20px}

    /* Categories list */
    .cat-list{display:flex; flex-direction:column; gap:12px}
    .cat{
      border:2px solid var(--line);
      border-radius:16px;
      padding:16px;
      background: var(--card);
      display:flex; 
      gap:14px; 
      align-items:flex-start;
      transition:all .25s ease;
      cursor:pointer;
      position: relative;
      overflow: hidden;
    }
    .cat::before{
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--accent);
      transform: scaleY(0);
      transform-origin: bottom;
      transition: transform 0.3s ease;
    }
    .cat:hover{
      background:rgba(99,102,241,.03); 
      border-color:var(--accent-light);
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(99,102,241,.08);
    }
    .cat:active{transform:translateX(2px)}
    .cat.active{
      border-color:var(--accent);
      background:rgba(99,102,241,.05);
    }
    .cat.active::before{
      transform: scaleY(1);
    }
    .cat .icon{
      width:44px; 
      height:44px; 
      border-radius:12px;
      border:2px solid var(--line);
      background: linear-gradient(135deg, rgba(99,102,241,.1) 0%, rgba(99,102,241,.05) 100%);
      display:grid; 
      place-items:center;
      flex:0 0 auto;
      font-size: 22px;
      transition: all .25s ease;
    }
    .cat:hover .icon{
      transform: scale(1.1) rotate(5deg);
      background: linear-gradient(135deg, rgba(99,102,241,.2) 0%, rgba(99,102,241,.1) 100%);
    }
    .cat.active .icon{
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      border-color: var(--accent);
    }
    .cat .title{
      margin:0; 
      font-weight:700; 
      font-size:14px;
      color: var(--text);
    }
    .cat .desc{
      margin:4px 0 0; 
      color:var(--text-secondary); 
      font-size:12px; 
      line-height:1.5;
      font-weight: 400;
    }

    /* Main content */
    .hero{
      padding:20px;
      background: var(--panel);
      border-bottom:2px solid var(--line);
    }
    .hero h3{
      margin:0 0 10px; 
      font-size:18px; 
      font-weight: 700;
      letter-spacing:.1px;
      color: var(--text);
    }
    .hero p{
      margin:0; 
      color:var(--text-secondary); 
      font-size:14px; 
      line-height:1.7;
      font-weight: 400;
    }
    .meta{
      display:flex; 
      gap:10px; 
      flex-wrap:wrap; 
      margin-top:14px;
    }
    .chip{
      border:2px solid var(--accent-light);
      background:rgba(99,102,241,.08);
      color:var(--accent-dark);
      padding:6px 12px;
      border-radius:999px;
      font-size:12px;
      font-weight: 600;
      user-select:none;
    }
    .chip strong{color:var(--text)}
    
    .section{
      padding:20px;
      border-top:2px solid var(--line);
      background: var(--card);
    }
    .section h4{
      margin:0 0 16px; 
      font-size:15px; 
      font-weight: 700;
      letter-spacing:.15px; 
      display:flex; 
      align-items:center; 
      gap:12px;
      color: var(--text);
    }
    .tag{
      font-size:11px; 
      color:var(--accent-dark);
      font-weight: 700;
      border:2px solid var(--accent-light);
      padding:4px 10px; 
      border-radius:999px;
      background:rgba(99,102,241,.08);
      text-transform: uppercase;
      letter-spacing: .3px;
    }

    .items{
      display:grid; 
      grid-template-columns:repeat(2, minmax(0,1fr)); 
      gap:16px;
    }
    @media (max-width: 860px){ .items{grid-template-columns:1fr} }
    
    .item{
      border:2px solid var(--line);
      border-radius:16px;
      background: var(--card);
      padding:16px;
      transition:all .25s ease;
    }
    .item:hover{
      border-color:var(--accent-light); 
      background:rgba(99,102,241,.03);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(99,102,241,.1);
    }
    .item:active{transform:translateY(0)}
    
    .item .top{
      display:flex; 
      justify-content:space-between; 
      align-items:flex-start; 
      gap:12px;
    }
    .item .name{
      margin:0; 
      font-weight:700; 
      font-size:14px; 
      line-height:1.4;
      color: var(--text);
    }
    .item .kind{
      font-size:11px; 
      color:var(--accent-dark);
      font-weight: 700;
      border:2px solid var(--accent-light);
      background:rgba(99,102,241,.08);
      padding:4px 10px; 
      border-radius:999px; 
      white-space:nowrap;
    }
    .item .blurb{
      margin:10px 0 0; 
      color:var(--text-secondary); 
      font-size:13px; 
      line-height:1.6;
      font-weight: 400;
    }
    .item .actions{
      display:flex; 
      gap:8px; 
      flex-wrap:wrap; 
      margin-top:14px;
    }
    .item button{
      padding:10px 16px; 
      font-size:13px; 
      border-radius:12px;
    }
    .item button.primary{padding:10px 16px}
    
    .empty{
      border:2px dashed var(--line-dark);
      border-radius:14px;
      padding:16px;
      color:var(--text-secondary);
      background:rgba(99,102,241,.04);
      font-size:13px;
      line-height:1.6;
      font-weight: 400;
    }

    /* Modal */
    .modal-backdrop{
      position:fixed; 
      inset:0;
      background:rgba(15,23,42,.5);
      backdrop-filter: blur(4px);
      display:none;
      align-items:center; 
      justify-content:center;
      padding:20px;
      z-index:50;
    }
    .modal-backdrop.open{display:flex}
    
    .modal{
      width:min(920px, 96vw);
      max-height:min(86vh, 900px);
      overflow:auto;
      border:2px solid var(--line);
      border-radius:var(--radius);
      background: var(--card);
      box-shadow:var(--shadow-lg);
      animation: modalSlideIn 0.3s ease;
    }
    
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .modal header{
      position:sticky; 
      top:0;
      border-radius:0;
      box-shadow:none;
      border:none;
      border-bottom:2px solid var(--line);
      background: var(--panel);
      padding:18px 20px;
      align-items:center;
      margin-bottom: 0;
    }
    .modal header h3{
      margin:0; 
      font-size:18px;
      font-weight: 700;
      color: var(--text);
    }
    .modal header .sub{
      margin:4px 0 0; 
      color:var(--text-secondary); 
      font-size:13px;
      font-weight: 400;
    }
    .modal .content{padding:20px}
    .modal .content .lead{
      color:var(--text-secondary); 
      font-size:14px; 
      line-height:1.7; 
      margin:0 0 16px;
      font-weight: 400;
    }
    .modal .content pre{
      margin:0;
      white-space:pre-wrap;
      word-break:break-word;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:13px;
      color:var(--text-secondary);
      border:2px solid var(--line);
      background: var(--bg-secondary);
      border-radius:14px;
      padding:16px;
      line-height: 1.6;
    }
    .modal .footer{
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
      gap:12px; 
      flex-wrap:wrap;
      padding:18px 20px;
      border-top:2px solid var(--line);
      background: var(--panel);
    }
    .modal .footer .left{
      display:flex; 
      gap:10px; 
      flex-wrap:wrap; 
      align-items:center;
    }
    .modal .footer .right{
      display:flex; 
      gap:10px; 
      flex-wrap:wrap;
    }
    
    .toast{
      position:fixed;
      bottom:24px; 
      left:50%;
      transform:translateX(-50%);
      background: var(--text);
      border:2px solid var(--line);
      border-radius:999px;
      padding:12px 20px;
      color: white;
      font-size:13px;
      font-weight: 600;
      display:none;
      z-index:60;
      box-shadow:0 12px 40px rgba(15,23,42,.2);
      animation: toastSlideUp 0.3s ease;
    }
    
    @keyframes toastSlideUp {
      from {
        opacity: 0;
        transform: translate(-50%, 10px);
      }
      to {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }
    
    .toast.show{display:block}

    @media print{
      header, .toolbar, #leftCard{display:none !important}
      body{background:#fff; color:#000}
      .card{box-shadow:none; border-color:#ccc}
      .item, .cat{border-color:#ccc; background:#fff}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Resource Hub</h1>
        <p>
          Templates, guides, checklists, videos, and updates to support business, employment, and HR needs.
          Use search and filters to find what you need quickly.
        </p>
      </div>

      <div class="toolbar">
        <div class="search">
          <input id="q" type="search" placeholder="Search resources (e.g., GDPR, contracts, redundancy)..." />
          <button class="primary" id="btnRequest">Request a Topic</button>
        </div>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Categories -->
      <div class="card" id="leftCard">
        <h2>
          Categories
          <span class="pill" id="countPill">0 items</span>
        </h2>
        <div class="body">
          <div class="cat-list" id="catList"></div>
          <div class="body" style="padding:0; margin-top:14px;">
            <div class="empty">
              Tip: choose a category, then refine with search. Open any item to view a short summary and "how to use".
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: Content -->
      <div class="card">
        <h2>
          Resources
          <span class="pill" id="activePill">All</span>
        </h2>

        <div class="hero" id="hero">
          <h3 id="heroTitle">All resources</h3>
          <p id="heroDesc">
            Browse or search across all categories: document templates, letter templates, guides, step-by-step guides,
            checklists, videos & webinars, legal updates, and consultations.
          </p>
          <div class="meta" id="heroMeta"></div>
        </div>

        <div class="section">
          <h4>Results <span class="tag" id="resultsTag">0</span></h4>
          <div class="items" id="items"></div>
          <div class="empty" id="emptyState" style="display:none; margin-top:16px;">
            No results match your search. Try clearing your search or selecting a different category.
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- MODAL -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-label="Resource details">
    <div class="modal">
      <header>
        <div>
          <h3 id="mTitle">Resource</h3>
          <div class="sub" id="mSub">Category â€¢ Type</div>
        </div>
        <button id="mClose" aria-label="Close">Close</button>
      </header>
      <div class="content">
        <p class="lead" id="mBlurb"></p>
        <pre id="mBody"></pre>
      </div>
      <div class="footer">
        <div class="left">
          <span class="pill" id="mPill">â€”</span>
        </div>
        <div class="right">
          <button id="mCopy">Copy Summary</button>
          <button class="primary" id="mAction">Take Action</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Copied</div>

  <script>
    (function(){
      const $ = (sel, root=document) => root.querySelector(sel);
      const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

      // --- Data (you can replace with API-fed content later) ---
      const CATEGORIES = [
        {
          id: "docs",
          title: "Document Templates",
          icon: "ðŸ“„",
          desc: "Top-quality legal document templates tailored to your business needs.",
          longDesc: "Gain access to a wide range of top-quality legal document templates tailored to your business needs, including Shareholders Agreements, Terms and Conditions, Agency Agreements, Employment Contracts, Employee Handbooks, Website Policies, and many others.",
          chips: ["Shareholders", "Contracts", "Employment", "Website", "Agency"]
        },
        {
          id: "letters",
          title: "Letter Templates",
          icon: "âœ‰ï¸",
          desc: "Hundreds of letters for common legal scenarios in small businesses.",
          longDesc: "We offer hundreds of template letters designed to address a wide range of legal scenarios encountered by small businesses, including hiring employees, pursuing outstanding debts, and managing redundancies. Our resources are developed to support your business needs comprehensively.",
          chips: ["Hiring", "Debt", "Redundancy", "HR", "Disputes"]
        },
        {
          id: "guides",
          title: "Easy to read Guides",
          icon: "ðŸ“˜",
          desc: "Straightforward guides on GDPR, structures, IP, contracts and consumer relations.",
          longDesc: "Find straightforward guides on GDPR, business structures, intellectual property, contracts, and consumer relationsâ€”all in one place.",
          chips: ["GDPR", "IP", "Contracts", "Consumer", "Structures"]
        },
        {
          id: "steps",
          title: "Step by Step Guides",
          icon: "ðŸ§­",
          desc: "Practical action plans with templates and checklists for common challenges.",
          longDesc: "This collection of 'Step by Step' guides addresses various challenges commonly faced by small business owners and employers. Each guide offers practical, clearly structured action plans, including templates and checklists, designed to support effective management of specific issues with confidence.",
          chips: ["Action plans", "Templates", "Checklists", "Employer", "Management"]
        },
        {
          id: "checklists",
          title: "Checklists",
          icon: "âœ…",
          desc: "Comprehensive checklists for investigations, GDPR compliance, probation reviews, and more.",
          longDesc: "Comprehensive checklists designed to help ensure that all critical action items are addressed during procedures such as internal investigations, GDPR compliance, or employee probation reviews.",
          chips: ["Investigation", "Compliance", "Probation", "Audit", "Process"]
        },
        {
          id: "videos",
          title: "Videos & Webinars",
          icon: "ðŸŽ¥",
          desc: "Knowledge-focused videos and webinars. Request a topic and we'll create it.",
          longDesc: "Access knowledge-focused videos and webinars for clearer understanding. Request a topic, and we'll create a video or webinar tailored to your needs.",
          chips: ["Webinar", "Training", "Explainers", "On-demand", "Request"]
        },
        {
          id: "updates",
          title: "Legal Updates",
          icon: "ðŸ—žï¸",
          desc: "Timely business, employment, and HR updates delivered to your inbox.",
          longDesc: "Receive timely updates on business, employment, and human resources delivered directly to your inbox.",
          chips: ["Employment", "HR", "Business", "Regulatory", "Inbox"]
        },
        {
          id: "consults",
          title: "Consultations",
          icon: "â˜Žï¸",
          desc: "Direct legal support for business or employment issues.",
          longDesc: "Get direct legal support for any business or employment issue. Have a quick question? Call us. Need advice? We're here to help.",
          chips: ["Call", "Advice", "Support", "Urgent", "Expert"]
        }
      ];

      // Sample resource library (for UI demo)
      const RESOURCES = [
        // Document Templates
        { id:"doc_shareholders", cat:"docs", type:"Template", name:"Shareholders Agreement (Starter)", blurb:"A practical agreement to set shareholder rights, transfers, and decision-making.", body: sample("Shareholders Agreement", [
          "Use when: multiple shareholders in a company.",
          "Includes: share transfers, reserved matters, dispute resolution, dividends.",
          "Next steps: tailor to your cap table + add schedules."
        ])},
        { id:"doc_terms", cat:"docs", type:"Template", name:"Terms & Conditions (Services)", blurb:"Standard T&Cs for service providers, including payment and liability clauses.", body: sample("Terms & Conditions", [
          "Core clauses: scope, fees, payment terms, termination.",
          "Compliance: consumer vs B2B differences.",
          "Tip: align with your quoting/invoicing process."
        ])},
        { id:"doc_employment", cat:"docs", type:"Template", name:"Employment Contract (Permanent)", blurb:"A contract covering pay, hours, probation, confidentiality and termination.", body: sample("Employment Contract", [
          "Include: role, salary, working hours, place of work, probation.",
          "Policies: reference employee handbook.",
          "Remember: statutory entitlements must be met."
        ])},
        { id:"doc_handbook", cat:"docs", type:"Template", name:"Employee Handbook (Core)", blurb:"Company policies covering conduct, leave, discipline, grievances and more.", body: sample("Employee Handbook", [
          "Policies: leave, absence, disciplinary, grievance, IT usage.",
          "Best practice: review yearly; communicate changes.",
          "Attach: data protection & security policies."
        ])},
        { id:"doc_webpol", cat:"docs", type:"Template", name:"Website Policies Pack", blurb:"Privacy policy, cookie policy, and website terms bundle.", body: sample("Website Policies", [
          "Privacy: lawful basis, retention, rights, processors.",
          "Cookies: consent + cookie table.",
          "Website terms: IP, acceptable use, disclaimers."
        ])},

        // Letter Templates
        { id:"let_offer", cat:"letters", type:"Letter", name:"Offer Letter (Employee)", blurb:"Offer letter with contingencies and next steps.", body: sample("Offer Letter", [
          "Use for: conditional offers pending references/verification.",
          "Includes: start date, salary, acceptance instructions.",
          "Pair with: employment contract + handbook."
        ])},
        { id:"let_debt", cat:"letters", type:"Letter", name:"Debt Chaser (Stage 1)", blurb:"Polite reminder for overdue invoices with payment link and deadline.", body: sample("Debt Chaser", [
          "Tone: professional, factual, time-bound.",
          "Attach: invoice copy, statement of account.",
          "Escalate: Stage 2 / solicitor letter if needed."
        ])},
        { id:"let_redund", cat:"letters", type:"Letter", name:"Redundancy Consultation Invite", blurb:"Invite to consultation meeting with outline of process and representation rights.", body: sample("Redundancy Invite", [
          "Include: reason, meeting date/time, right to representation.",
          "Attach: selection criteria (if applicable).",
          "Keep: records of consultation outcomes."
        ])},

        // Easy Guides
        { id:"g_gdpr", cat:"guides", type:"Guide", name:"GDPR for Small Business (Plain English)", blurb:"What you need to do, and what good looks like.", body: sample("GDPR Guide", [
          "Map data flows; identify lawful bases.",
          "Keep a retention schedule.",
          "Handle SARs within statutory timelines.",
          "Train staff & document policies."
        ])},
        { id:"g_ip", cat:"guides", type:"Guide", name:"Intellectual Property Basics", blurb:"Trademarks, copyright, designs, and protecting your brand.", body: sample("IP Basics", [
          "Register trademarks early where it matters.",
          "Use NDAs + IP clauses in contracts.",
          "Maintain evidence of creation for copyright."
        ])},
        { id:"g_consumer", cat:"guides", type:"Guide", name:"Consumer Rights & Returns", blurb:"Refunds, cancellations, and fair terms for consumers.", body: sample("Consumer Rights", [
          "Distance selling cooling-off rules.",
          "Transparent pricing and delivery terms.",
          "Avoid unfair contract terms."
        ])},

        // Step-by-step
        { id:"s_investigation", cat:"steps", type:"Step-by-step", name:"Internal Investigation Playbook", blurb:"Structured steps to handle workplace issues fairly and consistently.", body: sample("Investigation Playbook", [
          "1) Triage & immediate risk control",
          "2) Appoint investigator + define scope",
          "3) Collect evidence + interviews",
          "4) Findings report + recommendations",
          "5) Follow-up actions + recordkeeping"
        ])},
        { id:"s_probation", cat:"steps", type:"Step-by-step", name:"Probation Review Process", blurb:"A clear plan for reviewing performance and confirming employment.", body: sample("Probation Review", [
          "Set expectations & objectives early.",
          "Midpoint check-in and documented feedback.",
          "Final review with decision: confirm/extend/terminate.",
          "Use templates for letters and meeting notes."
        ])},

        // Checklists
        { id:"c_gdpr", cat:"checklists", type:"Checklist", name:"GDPR Compliance Checklist", blurb:"A practical checklist for key GDPR actions and documentation.", body: sample("GDPR Checklist", [
          "Records of processing (RoPA)",
          "Privacy notices",
          "Processor agreements",
          "Retention & deletion process",
          "Security controls",
          "Incident response plan"
        ])},
        { id:"c_investigation", cat:"checklists", type:"Checklist", name:"Investigation Checklist", blurb:"Ensure nothing is missed during workplace investigations.", body: sample("Investigation Checklist", [
          "Scope & allegations documented",
          "Witness list and interview plan",
          "Evidence log maintained",
          "Right to representation respected",
          "Report approved and stored securely"
        ])},

        // Videos & webinars
        { id:"v_gdpr", cat:"videos", type:"Video", name:"GDPR Essentials (20 min)", blurb:"Short explainer covering the fundamentals.", body: sample("GDPR Video", [
          "What GDPR applies to",
          "Lawful bases & transparency",
          "Data subject rights",
          "Practical compliance habits"
        ])},
        { id:"v_dismissal", cat:"videos", type:"Webinar", name:"Managing Dismissals Fairly", blurb:"Common pitfalls and a fair process for employers.", body: sample("Dismissals Webinar", [
          "Disciplinary vs capability vs redundancy",
          "Documentation and process",
          "Meetings, representation, appeal",
          "Avoiding unfair dismissal risks"
        ])},

        // Updates
        { id:"u_employment", cat:"updates", type:"Update", name:"Employment Law Updates (Monthly)", blurb:"Monthly digest of key changes and practical implications.", body: sample("Legal Updates", [
          "What changed",
          "Who it impacts",
          "Action checklist for employers",
          "Links to relevant templates/guides"
        ])},

        // Consultations
        { id:"k_quickcall", cat:"consults", type:"Consultation", name:"Quick Question Call", blurb:"A short call for urgent questions or quick clarity.", body: sample("Consultation", [
          "Ideal for: quick guidance and next steps.",
          "Prepare: short summary + key documents.",
          "Outcome: action plan + recommended templates."
        ])},
        { id:"k_advice", cat:"consults", type:"Consultation", name:"Advice Session (60 min)", blurb:"Deeper support for complex business or employment issues.", body: sample("Advice Session", [
          "Scope: case review + risk assessment.",
          "Deliverables: practical plan + docs to use.",
          "Follow-up: optional review of drafts."
        ])},
      ];

      function sample(title, lines){
        return title.toUpperCase() + "\n" +
          "-".repeat(Math.min(60, Math.max(18, title.length + 6))) + "\n" +
          lines.map(l => "â€¢ " + l).join("\n");
      }

      // --- State ---
      const state = {
        activeCat: "all",
        query: "",
        selectedResourceId: null
      };

      // --- Elements ---
      const catList = $("#catList");
      const itemsEl = $("#items");
      const emptyState = $("#emptyState");
      const qEl = $("#q");
      const activePill = $("#activePill");
      const resultsTag = $("#resultsTag");
      const countPill = $("#countPill");
      const heroTitle = $("#heroTitle");
      const heroDesc = $("#heroDesc");
      const heroMeta = $("#heroMeta");

      const modalBackdrop = $("#modalBackdrop");
      const mTitle = $("#mTitle");
      const mSub = $("#mSub");
      const mBlurb = $("#mBlurb");
      const mBody = $("#mBody");
      const mPill = $("#mPill");
      const toast = $("#toast");

      // --- Render helpers ---
      function iconFor(catId){
        const cat = CATEGORIES.find(c => c.id === catId);
        return cat ? cat.icon : "ðŸ“š";
      }

      function setHero(){
        heroMeta.innerHTML = "";
        if (state.activeCat === "all"){
          heroTitle.textContent = "All resources";
          heroDesc.textContent = "Browse or search across all categories: document templates, letter templates, guides, step-by-step guides, checklists, videos & webinars, legal updates, and consultations.";
          const chips = ["Templates", "Guides", "Checklists", "Videos", "Updates", "Support"];
          chips.forEach(t => heroMeta.appendChild(chipEl(t)));
          return;
        }
        const cat = CATEGORIES.find(c => c.id === state.activeCat);
        if (!cat) return;
        heroTitle.textContent = cat.title;
        heroDesc.textContent = cat.longDesc;
        cat.chips.forEach(t => heroMeta.appendChild(chipEl(t)));
      }

      function chipEl(text){
        const el = document.createElement("span");
        el.className = "chip";
        el.textContent = text;
        return el;
      }

      function renderCategories(){
        catList.innerHTML = "";
        const allBtn = catButton({
          id:"all",
          title:"All resources",
          icon:"ðŸ“š",
          desc:"Search and browse across the full library."
        });
        catList.appendChild(allBtn);

        CATEGORIES.forEach(cat => catList.appendChild(catButton(cat)));
        highlightActiveCat();
      }

      function catButton(cat){
        const el = document.createElement("div");
        el.className = "cat";
        el.dataset.cat = cat.id;
        el.innerHTML = `
          <div class="icon">${cat.icon}</div>
          <div>
            <p class="title">${cat.title}</p>
            <p class="desc">${cat.desc}</p>
          </div>
        `;
        el.addEventListener("click", () => {
          state.activeCat = cat.id;
          highlightActiveCat();
          setHero();
          renderResources();
        });
        return el;
      }

      function highlightActiveCat(){
        $$(".cat", catList).forEach(c => c.classList.toggle("active", c.dataset.cat === state.activeCat));
        activePill.textContent = state.activeCat === "all"
          ? "All"
          : (CATEGORIES.find(c => c.id === state.activeCat)?.title || "All");
      }

      function filterResources(){
        const q = (state.query || "").trim().toLowerCase();
        return RESOURCES.filter(r => {
          const catOk = (state.activeCat === "all") ? true : r.cat === state.activeCat;
          if (!catOk) return false;
          if (!q) return true;
          const hay = (r.name + " " + r.type + " " + r.blurb + " " + r.body + " " + (CATEGORIES.find(c=>c.id===r.cat)?.title||"")).toLowerCase();
          return hay.includes(q);
        });
      }

      function renderResources(){
        const list = filterResources();
        itemsEl.innerHTML = "";
        resultsTag.textContent = String(list.length);
        countPill.textContent = `${RESOURCES.length} items`;

        emptyState.style.display = list.length ? "none" : "block";

        list.forEach(r => {
          const el = document.createElement("div");
          el.className = "item";
          el.innerHTML = `
            <div class="top">
              <div>
                <p class="name">${r.name}</p>
              </div>
              <span class="kind">${r.type}</span>
            </div>
            <div class="blurb">${r.blurb}</div>
            <div class="actions">
              <button class="primary" data-open="${r.id}">Open</button>
              <button data-copy="${r.id}">Copy</button>
              <button data-action="${r.id}">Take Action</button>
            </div>
          `;
          itemsEl.appendChild(el);
        });
      }

      // --- Modal ---
      function openModal(resourceId){
        const r = RESOURCES.find(x => x.id === resourceId);
        if (!r) return;
        const cat = CATEGORIES.find(c => c.id === r.cat);

        mTitle.textContent = r.name;
        mSub.textContent = `${cat ? cat.title : "Resource"} â€¢ ${r.type}`;
        mBlurb.textContent = r.blurb;
        mBody.textContent = r.body;
        mPill.textContent = `${iconFor(r.cat)} ${r.type}`;

        modalBackdrop.classList.add("open");
        state.selectedResourceId = r.id;
      }

      function closeModal(){
        modalBackdrop.classList.remove("open");
        state.selectedResourceId = null;
      }

      function showToast(msg){
        toast.textContent = msg;
        toast.classList.add("show");
        clearTimeout(showToast._t);
        showToast._t = setTimeout(() => toast.classList.remove("show"), 1800);
      }

      async function copyText(text){
        try{
          await navigator.clipboard.writeText(text);
          showToast("Copied to clipboard");
        }catch{
          // fallback
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          showToast("Copied");
        }
      }

      function actionFor(resourceId){
        const r = RESOURCES.find(x => x.id === resourceId);
        if (!r) return;

        // Basic "action" behaviors per category/type (demo-friendly)
        const cat = r.cat;
        if (cat === "updates"){
          openModal(resourceId);
          mBody.textContent = sample("Subscribe to Legal Updates", [
            "1) Enter your email in your marketing system / CRM.",
            "2) Choose topics: Business â€¢ Employment â€¢ HR.",
            "3) Frequency: Weekly or Monthly.",
            "4) Keep a record of consent."
          ]);
          return;
        }
        if (cat === "consults"){
          openModal(resourceId);
          mBody.textContent = sample("Prepare for your consultation", [
            "Write a 5-line summary of the issue.",
            "Collect key documents: contracts, letters, policies.",
            "List desired outcome and any deadlines.",
            "Note any prior steps taken."
          ]);
          return;
        }
        if (cat === "videos"){
          openModal(resourceId);
          mBody.textContent = sample("Watch / Request content", [
            "If watching: schedule 20â€“60 minutes uninterrupted.",
            "If requesting: define the topic and audience.",
            "Include: your industry, jurisdiction, and scenario.",
            "We can provide: slides, checklist, and template pack."
          ]);
          return;
        }

        // Default: open resource + suggest next steps
        openModal(resourceId);
        mBody.textContent = r.body + "\n\n" + sample("Next steps", [
          "Duplicate this template and tailor to your scenario.",
          "Use the checklist/guide to validate compliance.",
          "If unsure, request a consultation for review."
        ]);
      }

      // --- Events ---
      qEl.addEventListener("input", () => {
        state.query = qEl.value || "";
        renderResources();
      });

      $("#btnRequest").addEventListener("click", () => {
        // lightweight request UI via modal
        openModal("v_gdpr"); // reuse modal shell; overwrite content
        mTitle.textContent = "Request a Topic";
        mSub.textContent = "Videos & Webinars â€¢ Request";
        mBlurb.textContent = "Tell us what you need and we'll create a video or webinar tailored to your requirements.";
        mBody.textContent = sample("Topic request template", [
          "Topic: [e.g., Managing probation]",
          "Audience: [owners / managers / HR]",
          "Jurisdiction: [Ireland / UK / EU]",
          "Format: [Video / Webinar / Both]",
          "Length: [10â€“20 min / 45 min / 60 min]",
          "Include templates/checklists? [Yes/No]",
          "Deadline: [date]"
        ]);
        mPill.textContent = "ðŸŽ¥ Request";
      });

      // Delegated clicks for item buttons
      itemsEl.addEventListener("click", (e) => {
        const openId = e.target.closest("button")?.dataset.open;
        const copyId = e.target.closest("button")?.dataset.copy;
        const actionId = e.target.closest("button")?.dataset.action;

        if (openId){
          openModal(openId);
        }
        if (copyId){
          const r = RESOURCES.find(x => x.id === copyId);
          if (r) copyText(`${r.name}\n\n${r.blurb}\n\n${r.body}`);
        }
        if (actionId){
          actionFor(actionId);
        }
      });

      $("#mClose").addEventListener("click", closeModal);
      modalBackdrop.addEventListener("click", (e) => {
        if (e.target === modalBackdrop) closeModal();
      });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });

      $("#mCopy").addEventListener("click", () => {
        if (!state.selectedResourceId) return;
        const r = RESOURCES.find(x => x.id === state.selectedResourceId);
        if (!r) return;
        copyText(`${r.name}\n\n${r.blurb}\n\n${mBody.textContent}`);
      });

      $("#mAction").addEventListener("click", () => {
        if (!state.selectedResourceId) return;
        actionFor(state.selectedResourceId);
        showToast("Action loaded");
      });

      // --- Init ---
      function init(){
        renderCategories();
        setHero();
        renderResources();
        // default active: all
        state.activeCat = "all";
        highlightActiveCat();
      }
      init();
    })();
  </script>
</body>
</html>
